// Complete Lox Example: A Simple Grade Calculator Program
// This example demonstrates variables, arithmetic, conditionals, loops, and functions

// Step 1: Initialize student data
var studentName = "Alice";
var totalScore = 0;
var numberOfTests = 5;

print "Student Grade Calculator";
print studentName;

// Step 2: Calculate test scores using a loop
print "Calculating test scores...";
for (var i = 1; i <= numberOfTests; i = i + 1) {
    var score = 80 + i * 2;  // Simulated scores: 82, 84, 86, 88, 90
    totalScore = totalScore + score;
    print score;
}

// Step 3: Calculate average using a function
fun calculateAverage(total, count) {
    return total / count;
}

var average = calculateAverage(totalScore, numberOfTests);
print "Total score:";
print totalScore;
print "Average score:";
print average;

// Step 4: Determine grade using conditionals
fun getGrade(score) {
    if (score >= 90) {
        return "A";
    } else {
        if (score >= 80) {
            return "B";
        } else {
            if (score >= 70) {
                return "C";
            } else {
                return "F";
            }
        }
    }
}

var finalGrade = getGrade(average);
print "Final grade:";
print finalGrade;

// Step 5: Check if student passed using logical operators
var passingScore = 70;
var isPassing = average >= passingScore;

if (isPassing and average >= 85) {
    print "Excellent performance!";
} else {
    if (isPassing or average >= 60) {
        print "Good job!";
    } else {
        print "Needs improvement";
    }
}

// Step 6: Calculate bonus points using recursion
// Fibonacci sequence for bonus calculation
fun fibonacci(n) {
    if (n <= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

print "Calculating bonus points...";
var bonusPoints = fibonacci(6);
print "Bonus points awarded:";
print bonusPoints;

var finalScore = average + bonusPoints;
print "Final score with bonus:";
print finalScore;

// Step 7: Count down to end
print "Program ending in:";
var countdown = 3;
while (countdown > 0) {
    print countdown;
    countdown = countdown - 1;
}

print "Grade calculation complete!";
